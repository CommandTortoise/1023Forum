<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>1023论坛 ヾ(≧▽≦*)o</title>
    <style>
    
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .auth-container {
            position: relative;
            max-width: 400px;
            margin: 100px auto;
            padding: 30px;
            background: rgba(0, 30, 0, 0.95);
            border: 2px solid #0f0;
            box-shadow: 0 0 30px #0f03;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #0f0;
            cursor: pointer;
            font-size: 1.5em;
        }

        /* 保持之前登录注册表单的样式 */
        /* ...原有样式... */
    </style>
</head>
<body>
    <canvas id="matrix"></canvas>
    
    <nav>
        <a href="#" class="glow">首页</a>
        <a href="#">技术文档</a>
        <a href="#">漏洞库</a>
        <a href="#">交流区</a>
        <a href="#" id="auth-link" style="float: right">登录/注册</a>
    </nav>
    <div class="container">
        <div class="post-list">
            <h2>最新帖子 <span class="blink">▌</span></h2>
            <div class="post-item">
                <h3>网络安全威胁无处不在，CVE漏洞频发，DDoS不断，无数刚建站的萌新被攻击索钱；我们要做的就是将网络安全、渗透技术分享出来供予学习，1023论坛因你而生！</h3>
                <p>作者：Command_Tortoise | 2025.3.2 13:14</p>
            </div>
            <div class="post-item">
                <h3>Welcome to 1023 forum!!</h3>
                <p>作者：Command_Tortoise | 2025.3.2 00:17</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- 原有内容保持不变 -->
    </div>

    <!-- 新增认证模态框 -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <span class="close-btn" onclick="closeAuth()">&times;</span>
            <div class="tabs">
                <div class="tab active" onclick="switchForm('login')">登录</div>
                <div class="tab" onclick="switchForm('register')">注册</div>
            </div>

            <form class="auth-form" onsubmit="return handleAuthSubmit(event)">
                <div id="error-message" class="error"></div>
                
                <input type="text" id="username" placeholder="用户名" required 
                       pattern="[A-Za-z0-9_]{4,20}" 
                       title="4-20位字母数字或下划线">
                
                <input type="password" id="password" placeholder="密码" required
                       minlength="8"
                       pattern="^(?=.*[A-Za-z])(?=.*\d).{8,}$" 
                       title="至少8位，包含字母和数字">
                
                <input type="password" id="confirm-password" placeholder="确认密码" 
                       style="display: none;">
                
                <button type="submit" id="submit-btn">登录</button>
            </form>
        </div>
    </div>

    <script>
        // 原有矩阵动画代码保持不变

        // 新增认证系统代码
        class AuthSystem {
            // 保持之前的类实现
            // ...之前实现的AuthSystem类代码...
        }

        const auth = new AuthSystem();
        let isLogin = true;

        // 显示/隐藏认证模态框
        document.getElementById('auth-link').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('authModal').style.display = 'block';
        });

        function closeAuth() {
            document.getElementById('authModal').style.display = 'none';
            resetForm();
        }

        function resetForm() {
            document.getElementById('username").value = '';
            document.getElementById('password").value = '';
            document.getElementById('confirm-password").value = '';
            document.getElementById('error-message").textContent = '';
        }

        function switchForm(type) {
            // 保持之前的切换逻辑
            // ...之前实现的switchForm函数...
        }

        function handleAuthSubmit(e) {
            // 保持之前的提交处理逻辑
            // ...之前实现的handleSubmit函数...
            // 登录成功后调用：
            // closeAuth();
            // updateNavState();
        }

        // 更新导航栏状态
        function updateNavState() {
            const authLink = document.getElementById('auth-link');
            // 这里可以添加从localStorage获取登录状态的逻辑
            authLink.textContent = '已登录 | 退出';
            authLink.onclick = () => {
                // 退出登录逻辑
                authLink.textContent = '登录/注册';
                authLink.onclick = () => 
                    document.getElementById('authModal').style.display = 'block';
            };
        }

        // 点击模态框外部关闭
        window.onclick = function(event) {
            const modal = document.getElementById('authModal');
            if (event.target == modal) {
                closeAuth();
            }
        }
    </script>
</body>
</html>
